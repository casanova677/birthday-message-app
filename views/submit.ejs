<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Leave a Birthday Message ğŸ‰</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

   <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Great+Vibes&display=swap" rel="stylesheet">

  <!-- ğŸ” Background fade animation -->
  <style>
    body {
      margin: 0;
      overflow-x: hidden;
    }

    /* Background container */
    .bg-slideshow {
      position: fixed;
      inset: 0;
      z-index: -10;
    }

    .bg-slide {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center 40%;
      opacity: 0;
      animation: fadeBg 16s infinite;
    }

    .bg-slide:nth-child(1) {
      background-image: url('/images/bg1.png')  ;
      background-size: cover;
      min-height: 100vh; /* change */
      animation-delay: 0s;
    }

    .bg-slide:nth-child(2) {
      background-image: url('/images/bg2.jpg') ;
      background-size: cover;
      min-height: 100vh;
      animation-delay: 8s;
    }

    @keyframes fadeBg {
      0% { opacity: 0; }
      15% { opacity: 1; }
      50% { opacity: 1; }
      65% { opacity: 0; }
      100% { opacity: 0; }
    }

    /* Optional soft overlay */
    .bg-overlay {
      position: fixed;
      inset: 0;
      background: linear-gradient(
        rgba(0,0,0,0.25),
        rgba(0,0,0,0.25)
      );
      z-index: -5;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center px-4 text-white">

  <!-- ğŸŒ„ Background -->
  <div class="bg-slideshow">
    <div class="bg-slide"></div>
    <div class="bg-slide"></div>
  </div>
  <div class="bg-overlay"></div>

  <!-- ğŸ’Œ Form Card -->
  <div
    class="relative z-10
         w-full max-w-xl sm:max-w-lg
         bg-white/30 backdrop-blur-xl
         rounded-3xl
         p-6 sm:p-8
         shadow-2xl
         border border-white/40">

    <h1 class="text-4xl sm:text-3xl
         font-extrabold text-pink-600
         text-center mb-2">
      ğŸˆ Leave a Birthday Message
    </h1>

    <p class="text-2xl sm:text-2xl text-center opacity-90 mb-6" style="font-family: 'Great Vibes', cursive;">
      Make their day brighter with your wishes ğŸ’–
    </p>

    <form  enctype="multipart/form-data" class="space-y-5">

      <!-- Sender Name -->
      <div>
        <label class="block text-lg sm:text-sm mb-1 text-black-800">
          Your Name
        </label>
        <input
          type="text"
          name="sender_name"
          required
          maxlength="40"
          placeholder="e.g. Sarah ğŸ‚"
          class="w-full rounded-2xl
                p-4 sm:p-3
                text-lg sm:text-base
                text-gray-800
                focus:outline-none
                focus:ring-2 focus:ring-pink-400"
        />
      </div>

      <!-- Message -->
      <div>
        <label class="block text-lg sm:text-sm mb-1 text-black-800">
          Your Message
        </label>
        <textarea
          name="message"
          rows="6"
          required
          placeholder="Write something beautiful..."
          class="w-full rounded-2xl
                p-4 sm:p-3
                text-lg sm:text-base
                text-gray-800
                min-h-[180px] sm:min-h-[120px]
                focus:outline-none
                focus:ring-2 focus:ring-pink-400"
        ></textarea>
      </div>

      <!-- Image Upload -->
      <div>
        <label class="block text-lg sm:text-sm mb-1 text-black-800">
          Add a Photo (optional)
        </label>

        <input
          type="file"
          name="picture"
          accept="image/*"
          class="block w-full
                text-base sm:text-sm
                file:mr-4 file:py-3 file:px-5
                file:rounded-full file:border-0
                file:font-semibold
                file:bg-white file:text-black
                hover:file:bg-black-100
                cursor-pointer"
        />
      </div>

      <!-- Preview -->
      <div id="preview" class="hidden">
        <p class="text-sm text-pink-800 mb-1">Preview:</p>
       <img
          id="previewImg"
          class="rounded-2xl
                max-h-72 sm:max-h-60
                mx-auto shadow-xl"
        />
      </div>

      <!-- Submit -->
      <button
        type="submit"
        class="w-full py-4 sm:py-3
              text-xl sm:text-base
              bg-white text-pink-600
              font-bold rounded-full
              shadow-xl
              hover:scale-105 transition"
      >
        ğŸ‰ Submit Message
      </button>

    </form>

    <!-- Back -->
    <div class="text-center mt-6">
      <a href="/" class="text-sm text-black-800 underline opacity-90 hover:opacity-100">
        â† Back to Home Page
      </a>
    </div>

  </div>
  <script>
    const form = document.querySelector('form');

    form.addEventListener('submit', async e => {
      e.preventDefault();

      const formData = new FormData(form);

      const res = await fetch('/submit', {
        method: 'POST',
        body: formData
      });

      if (res.ok) {
        confetti({
          particleCount: 180,
          spread: 90,
          origin: { y: 0.6 }
        });

        form.innerHTML = `
          <div class="text-center px-2">
            <h2 class="text-4xl font-bold text-pink-600">
              ğŸ‰ Message Sent!
            </h2>
            <p class="mt-4 text-xl text-pink-800">
              Thank you for making Francis smile ğŸ’–
            </p>
            <a href="/" class="inline-block mt-6 text-lg underline text-blue-800">
              Back to Birthday Page
            </a>
          </div>
        `;
      }
    });
  </script>


  <!-- ğŸ“· Image preview logic -->
  <script>
    const fileInput = document.querySelector('input[name="picture"]');
    const preview = document.getElementById('preview');
    const previewImg = document.getElementById('previewImg');

    fileInput.addEventListener('change', () => {
      const file = fileInput.files[0];
      if (!file) return;

      if (file.size > 5 * 1024 * 1024) {
        alert('Image must be under 5MB');
        fileInput.value = '';
        return;
      }

      const reader = new FileReader();
      reader.onload = e => {
        previewImg.src = e.target.result;
        preview.classList.remove('hidden');
      };
      reader.readAsDataURL(file);
    });
  </script>

</body>
</html>